# VibeSnap 标注工具栏 UI 设计

## 工具栏外观

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│    📄        💾        ✏️        ❌                          │
│   Copy      Save      Edit     Cancel                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 按钮详情

### 1. Copy（复制）
- **图标**：`doc.on.doc` (SF Symbol)
- **功能**：将截图复制到系统剪贴板
- **行为**：点击后工具栏消失，截图已在剪贴板中

### 2. Save（保存）
- **图标**：`square.and.arrow.down` (SF Symbol)
- **功能**：打开保存对话框
- **行为**：显示 NSSavePanel，用户选择保存位置和文件名

### 3. Edit（编辑）
- **图标**：`pencil.tip.crop.circle` (SF Symbol)
- **功能**：打开标注编辑器
- **行为**：工具栏消失，打开 EditorWindow 进行标注

### 4. Cancel（取消）
- **图标**：`xmark.circle` (SF Symbol)
- **功能**：取消本次截图
- **行为**：工具栏消失，截图被丢弃

## 视觉效果

### 材质
- **背景**：NSVisualEffectView with `.hudWindow` material
- **模糊**：系统级毛玻璃效果（Glassmorphism）
- **圆角**：12px
- **阴影**：系统默认阴影

### 尺寸
- **宽度**：280px
- **高度**：60px
- **按钮宽度**：60px
- **按钮高度**：50px
- **按钮间距**：10px

### 颜色
- **图标颜色**：白色
- **文字颜色**：白色
- **文字大小**：10pt, Medium weight
- **Hover 背景**：白色 10% 透明度

### 动画
- **淡入**：0.2s ease-out
- **淡出**：0.15s ease-in
- **Hover**：即时响应

## 定位逻辑

工具栏会智能定位在截图区域附近：

1. **首选位置**：截图区域下方，居中对齐
2. **备选位置**：如果下方空间不足，显示在上方
3. **边界检测**：确保工具栏完全在屏幕可见区域内
4. **安全边距**：距离屏幕边缘至少 20px

## 交互流程

```
用户截图
    ↓
选择区域
    ↓
释放鼠标
    ↓
[工具栏出现] ← 0.2s 淡入动画
    ↓
用户选择操作
    ↓
┌─────┬─────┬─────┬─────┐
│Copy │Save │Edit │Cancel│
└─────┴─────┴─────┴─────┘
  ↓     ↓     ↓     ↓
复制  保存  编辑  取消
  ↓     ↓     ↓     ↓
[工具栏消失] ← 0.15s 淡出动画
```

## 代码结构

### AnnotationToolbar (NSWindow)
- 管理工具栏窗口
- 处理定位逻辑
- 管理回调函数
- 控制显示/隐藏动画

### AnnotationToolbarView (NSView)
- 渲染视觉效果
- 创建按钮布局
- 处理用户交互
- 实现 hover 效果

## 与其他组件的关系

```
AppDelegate
    ↓
    ├─ OverlayWindow (截图选择)
    ↓
    ├─ AnnotationToolbar (快速操作) ← 新增
    ↓
    ├─ EditorWindow (标注编辑)
    ↓
    └─ ThumbnailOverlay (缩略图预览)
```

## 优势

1. **即时反馈**：截图后立即显示操作选项
2. **清晰选择**：4 个明确的操作按钮
3. **流畅体验**：平滑的动画过渡
4. **智能定位**：自动避开屏幕边界
5. **符合 PRD**：完全实现功能模块四的要求
